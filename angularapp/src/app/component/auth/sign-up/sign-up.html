<!-- src/app/component/auth/sign-up/sign-up.html -->
<div class="page-wrap" role="main" aria-labelledby="signup-heading">
  <section class="signup-card" aria-live="polite">
    <!-- LEFT: image with overlay text -->
    <div class="card-left anim-kenburns" aria-hidden="true">
      <div class="overlay">
        <h1>Your journey starts here.</h1>
        <p class="overlay-sub">Build your career passport with HireConnect.</p>
        <a class="signin" routerLink="/sign-in">Already have an Account? <strong>Sign In</strong></a>
      </div>
    </div>

    <!-- RIGHT: register form -->
    <div class="card-right" role="region" aria-labelledby="signup-heading-right">
      <h2 id="signup-heading" class="login-title">WELCOME TO HIRECONNECT</h2>
      <h3 id="signup-heading-right" class="login-sub">REGISTER HERE</h3>

      <!-- Inline status messages -->
      <div *ngIf="successMessage" class="status success" role="status" style="margin:12px 0; padding:10px; border-radius:6px;">
        <strong>{{ successMessage }}</strong>

        <!-- If an immediate redirect happens, show animated spinner + message -->
        <div style="display:flex; align-items:center; gap:10px; margin-top:8px;">
          <div aria-hidden="true" class="small-spinner" style="width:18px;height:18px;border:3px solid rgba(0,0,0,0.08);border-top-color:#046b2a;border-radius:50%;animation:spin 1s linear infinite;"></div>
          <span>Redirecting‚Ä¶</span>
        </div>

        <div style="margin-top:8px;">
          Or <a routerLink="/sign-in">click here to sign in</a>.
        </div>
      </div>

      <div *ngIf="errorMessage" class="status error" role="alert" style="margin:12px 0; padding:10px; border-radius:6px;">
        {{ errorMessage }}
      </div>

      <!-- Role selector -->
      <div class="role-container" style="margin-bottom:14px;">
        <label class="role-label" id="role-label">I am a:</label>
        <div class="role-buttons" role="tablist" aria-labelledby="role-label">
          <button 
            type="button" 
            class="role-btn" 
            [class.active]="role === 'candidate'" 
            (click)="setRole('candidate')"
            aria-pressed="{{ role === 'candidate' }}">
            <span class="role-ico">üë§</span>
            <span>Candidate</span>
          </button>

          <button 
            type="button" 
            class="role-btn" 
            [class.active]="role === 'recruiter'" 
            (click)="setRole('recruiter')"
            aria-pressed="{{ role === 'recruiter' }}">
            <span class="role-ico">üè¢</span>
            <span>Recruiter</span>
          </button>
        </div>
      </div>

      <form class="login-form" (ngSubmit)="onSubmit()" #signUpForm="ngForm" novalidate autocomplete="on" aria-describedby="signup-help">

        <div class="field-row">
          <div class="field">
            <label class="field-label" for="firstName">First Name</label>
            <input id="firstName" name="firstName" class="input" [(ngModel)]="firstName" required placeholder="Enter your first name" aria-required="true" />
          </div>
          <div class="field">
            <label class="field-label" for="lastName">Last Name</label>
            <input id="lastName" name="lastName" class="input" [(ngModel)]="lastName" required placeholder="Enter your last name" aria-required="true" />
          </div>
        </div>

        <div class="field">
          <label class="field-label" for="email">Your Email</label>
          <input id="email" name="email" type="email" class="input" [(ngModel)]="email" required placeholder="Enter your email address" aria-required="true" />
        </div>

        <div class="field">
          <label class="field-label" for="phone">Phone Number</label>
          <input id="phone" name="phone" type="tel" class="input" [(ngModel)]="phone" required placeholder="Enter your phone number" aria-required="true" />
        </div>

        <div class="field-row">
          <div class="field">
            <label class="field-label" for="password">Password</label>
            <input id="password" name="password" type="password" class="input" [(ngModel)]="password" required placeholder="Enter your password" aria-required="true" />
          </div>
          <div class="field">
            <label class="field-label" for="confirmPassword">Confirm Password</label>
            <input id="confirmPassword" name="confirmPassword" type="password" class="input" [(ngModel)]="confirmPassword" required placeholder="Re-enter your password" aria-required="true" />
          </div>
        </div>

        <button class="login-btn" type="submit" [disabled]="isLoading" aria-busy="{{ isLoading }}" style="width:100%; margin-top:12px;">
          <ng-container *ngIf="!isLoading; else busy">
            Register
          </ng-container>
          <ng-template #busy>
            <span class="small-spinner" aria-hidden="true" style="width:18px;height:18px;border:3px solid rgba(0,0,0,0.08);border-top-color:#c62828;border-radius:50%;animation:spin 1s linear infinite;margin-right:8px;display:inline-block;"></span>
            Registering‚Ä¶
          </ng-template>
        </button>
      </form>
    </div>
  </section>
</div>

<!-- quick inline spinner keyframes (if you don't include in global css) -->
<style>
  @keyframes spin { to { transform: rotate(360deg); } }

  /* Helpful small responsive tweaks (optional) */
  .signup-card { display:flex; gap:0; }
  @media (max-width: 900px) {
    .signup-card { flex-direction: column; }
    .card-left { height: 200px; }
  }
</style>
