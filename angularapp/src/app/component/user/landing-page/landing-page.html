<!-- src/app/component/public/landing/landing-page.html -->
<div class="landing-root">
  <div class="overlay"></div>

  <header class="hero" role="banner" aria-label="HireConnect hero">
    <div class="hero-inner">
      <div class="search-block">
        <h1 class="hero-title">Your dream job is just a search away</h1>
        <p class="hero-sub">Discover companies that value your skills and passion.</p>

        <form class="search-form" (ngSubmit)="onSearch()" autocomplete="off" role="search" aria-label="Job search">
          <div class="input-wrap input-title">
            <input
              type="text"
              name="title"
              [(ngModel)]="query.title"
              placeholder="Job title or company name"
              aria-label="Job title or company"
            />
          </div>

          <div class="input-wrap input-location">
            <select name="location" [(ngModel)]="query.location" aria-label="Location" (change)="onSearch()">
              <option value="">Any location</option>
              <option *ngFor="let l of locations" [value]="l">{{ l }}</option>
            </select>
          </div>

          <div class="input-wrap input-category">
            <select name="category" [(ngModel)]="query.category" aria-label="Category" (change)="onSearch()">
              <option value="">Any category</option>
              <option *ngFor="let c of categories" [value]="c">{{ c }}</option>
            </select>
          </div>

          <div class="input-wrap input-button">
            <button type="submit" class="btn-search" aria-label="Search jobs">Search Job</button>
          </div>
        </form>

        <div class="trending" aria-hidden="false">
          <span class="trending-label">Trending Keywords:</span>
          <div class="trending-list">
            <button *ngFor="let t of ['DESIGNER','PHP','DEVELOPER','iOS DEVELOPER','WEB']"
                    type="button"
                    class="tag"
                    (click)="query.title = t; onSearch()">
              {{ t }}
            </button>
          </div>
        </div>
      </div>

      <div class="hero-right" aria-hidden="true"></div>
    </div>
  </header>
</div>

<!-- RESULTS: only shown after user has searched (searched === true) -->
<section class="search-results" *ngIf="searched && filteredJobs.length > 0">
  <div class="section-inner">
    <div class="results-top d-flex align-items-center justify-content-between">
      <h2>Jobs</h2>
      <div class="results-count">{{ filteredJobs.length }} result{{ filteredJobs.length === 1 ? '' : 's' }}</div>
    </div>

    <div class="cards">
      <article class="job-card" *ngFor="let job of filteredJobs; trackBy: trackByJobId">
        <div class="job-card-left">
          <h3 class="job-title">{{ job.title }}</h3>
          <p class="job-meta">
            <!-- fixed expression: use optional chaining and typeof check (no "as any") -->
            <strong>
              {{ job.company?.name || job.companyName || (typeof job.company === 'string' ? job.company : '‚Äî') }}
            </strong>
            <span *ngIf="job.location"> ‚Ä¢ {{ job.location }}</span>
          </p>
          <p class="job-desc">
            {{ job.shortDescription || (job.description ? (job.description | slice:0:160) : '') }}
            <span *ngIf="(job.description || '').length > 160">‚Ä¶</span>
          </p>
        </div>

        <div class="job-card-right">
          <a [routerLink]="['/jobs', job.id]" class="btn-view" aria-label="View job details">View Details</a>
        </div>
      </article>
    </div>
  </div>
</section>

<!-- No results message after user searched -->
<section class="no-results" *ngIf="searched && !loading && filteredJobs.length === 0">
  <div class="section-inner">
    <p>No jobs found ‚Äî try different filters or search terms.</p>
    <div style="margin-top:12px;">
      <button class="btn btn-outline" (click)="clearFilters()">Clear filters</button>
    </div>
  </div>
</section>

<!-- Loading -->
<section class="loading" *ngIf="loading">
  <div class="section-inner">
    <p>Loading jobs‚Ä¶</p>
  </div>
</section>

<!-- Rest of landing page sections (features, stats, etc.) remain unchanged -->
<!-- ... -->



<!-- BELOW HERO: sections on full-width gray background but centered content -->

<!-- Features -->
<section class="features" aria-labelledby="features-heading">
  <div class="section-inner">
    <h2 id="features-heading">Why Choose HireConnect?</h2>
    <p>Join thousands of professionals who found their dream jobs with us</p>

    <div class="features-grid" role="list">
      <div class="feature-card" role="listitem">
        <div class="feature-icon" aria-hidden="true">üîç</div>
        <h3>Smart Job Search</h3>
        <p>Advanced filters and AI-powered matching to find the perfect job for your skills and preferences.</p>
      </div>

      <div class="feature-card" role="listitem">
        <div class="feature-icon" aria-hidden="true">üè¢</div>
        <h3>Top Companies</h3>
        <p>Connect with leading companies and startups across various industries and locations.</p>
      </div>

      <div class="feature-card" role="listitem">
        <div class="feature-icon" aria-hidden="true">‚úÖ</div>
        <h3>Verified Jobs</h3>
        <p>All job postings are verified to ensure authenticity and prevent fraudulent listings.</p>
      </div>

      <div class="feature-card" role="listitem">
        <div class="feature-icon" aria-hidden="true">üë•</div>
        <h3>Expert Support</h3>
        <p>Get personalized career guidance and application tips from our team of experts.</p>
      </div>
    </div>
  </div>
</section>


<!-- Statistics -->
<section class="stats" aria-labelledby="stats-heading">
  <div class="section-inner">
    <div class="stats-container" id="stats-heading" role="list">

      <!-- Loading state -->
      <ng-container *ngIf="statsLoading">
        <div class="stat-item" role="listitem"><h3>‚Ä¶</h3><p>Active Jobs</p></div>
        <div class="stat-item" role="listitem"><h3>‚Ä¶</h3><p>Companies</p></div>
        <div class="stat-item" role="listitem"><h3>‚Ä¶</h3><p>Job Seekers</p></div>
        <div class="stat-item" role="listitem"><h3>‚Ä¶</h3><p>Success Rate</p></div>
      </ng-container>

      <!-- Error state -->
      <div class="stat-item" *ngIf="!statsLoading && statsError" role="listitem" style="grid-column: 1 / -1;">
        <h3 style="margin:0;">‚ö†Ô∏è</h3>
        <p>{{ statsError }}</p>
      </div>

      <!-- Data state -->
      <ng-container *ngIf="!statsLoading && !statsError && stats">
        <div class="stat-item" role="listitem">
          <h3>{{ formatCompact(stats.activeJobs) }}</h3>
          <p>Active Jobs</p>
        </div>
        <div class="stat-item" role="listitem">
          <h3>{{ formatCompact(stats.companies) }}</h3>
          <p>Companies</p>
        </div>
        <div class="stat-item" role="listitem">
          <h3>{{ formatCompact(stats.jobSeekers) }}</h3>
          <p>Job Seekers</p>
        </div>
        <div class="stat-item" role="listitem">
          <h3>{{ formatPercent(stats.successRate) }}</h3>
          <p>Success Rate</p>
        </div>
      </ng-container>

    </div>
  </div>
</section>


<!-- Call To Action -->
<section class="cta" role="region" aria-labelledby="cta-heading">
  <div class="section-inner cta-content">
    <div>
      <h2 id="cta-heading">Ready to Start Your Journey?</h2>
      <p>Join thousands of professionals who have already found their dream jobs through HireConnect</p>
    </div>

    <div class="cta-buttons" role="group" aria-label="Call to action buttons">
      <a routerLink="/jobs" class="btn btn-primary" aria-label="Browse jobs">Browse Jobs</a>
      <a routerLink="/companies" class="btn btn-outline" aria-label="View companies">View Companies</a>
    </div>
  </div>
</section>


<!-- Reviews (separate section, not in footer) -->
<!-- Reviews (separate section, not in footer) -->
<section class="reviews" aria-labelledby="reviews-heading">
  <div class="section-inner">
    <h2 id="reviews-heading">What People Say</h2>
    <p>Real feedback from professionals who found opportunities with HireConnect</p>

    <!-- Loading / error states -->
    <div *ngIf="reviewsLoading">Loading reviews‚Ä¶</div>
    <div *ngIf="!reviewsLoading && reviewsError" class="text-error">{{ reviewsError }}</div>

    <!-- Top 3 recent reviews -->
    <ng-container *ngIf="!reviewsLoading && !reviewsError">
      <div class="reviews-grid" *ngIf="reviewsTop.length > 0; else noReviews">
        <article class="review-card" *ngFor="let r of reviewsTop; trackBy: trackByReview">
          <p class="review-text">‚Äú{{ r.message }}‚Äù</p>
          <div class="review-meta">
            ‚Äî {{ r.name }}<span *ngIf="r.designation">, {{ r.designation }}</span>
          </div>
        </article>
      </div>

      <ng-template #noReviews>
        <p>No reviews yet. Be the first to share your experience!</p>
      </ng-template>
    </ng-container>
  </div>
</section>

<section class="feedback">
  <div class="section-inner feedback-content">
    <!-- Left side -->
    <div class="feedback-left">
      <h2>We‚Äôd love your feedback</h2>
      <p>Your suggestions help us improve HireConnect for everyone. Share your experience or suggest improvements.</p>
      <div class="feedback-buttons">
        <a routerLink="/review-form" class="btn btn-primary">Leave Feedback</a>
        <a routerLink="/review-list" class="btn btn-outline">View Reviews</a>
      </div>
    </div>

    <!-- Right side -->
    <div class="feedback-right">
      <h3>Recent feedback</h3>

      <!-- Loading / error states -->
      <div *ngIf="reviewsLoading">Loading recent feedback‚Ä¶</div>
      <div *ngIf="!reviewsLoading && reviewsError" class="text-error">{{ reviewsError }}</div>

      <ul *ngIf="!reviewsLoading && !reviewsError && reviewsRecent.length > 0" class="recent-list">
        <li *ngFor="let r of reviewsRecent | slice:0:4; trackBy: trackByReview">
          ‚Äú{{ r.message }}‚Äù ‚Äî {{ r.name }}
        </li>
      </ul>


      <p *ngIf="!reviewsLoading && !reviewsError && reviewsRecent.length === 0">No recent feedback yet.</p>

      <a routerLink="/review-list">See all reviews for more feedback.</a>
    </div>
  </div>
</section>



